<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments.html :: head"></head>
<body class="d-flex flex-column min-vh-100 bg-light">
<div th:replace="fragments.html :: navigation-bar"></div>
<div class="container">
    <div class="py-5 text-center">
        <h2>대회 만들기</h2>
    </div>
    <div class="row mx-auto justify-content-center">
        <form class="col-md-6 mx-auto" th:action th:object="${competitionForm}" method="post">
            <div th:if="${#fields.hasGlobalErrors()}">
                <p class="text-danger" th:each="err : ${#fields.globalErrors()}" th:text="${err}">전체 오류 메시지</p>
            </div>
            <div class="mb-3">
                <label th:for="title">대회명</label>
                <input type="text" th:field="*{title}" placeholder="대회명을 입력하세요"
                       class="form-control" th:errorclass="is-invalid" autofocus="autofocus">
                <p th:errors="*{title}" class="text-danger">대회명 오류</p>
            </div>

            <div class="mb-3">
                <div class="fw-bold mb-1">대회 방식</div>
                <div th:each="type : ${T(hongik.ce.jolup.module.competition.domain.entity.CompetitionType).values()}" class="form-check form-check-inline">
                    <input type="radio" th:field="*{type}" th:value="${type.name()}" class="form-check-input">
                    <label th:for="${#ids.prev('type')}" th:text="${type.description}" class="form-check-label"></label>
                </div>
                <p th:errors="*{type}" class="text-danger">대회방식 오류</p>
            </div>

            <div class="mb-3">
                <div class="fw-bold mb-1">옵션</div>
                <div th:each="option : ${T(hongik.ce.jolup.module.competition.domain.entity.CompetitionOption).values()}" class="form-check form-check-inline">
                    <input type="radio" th:field="*{option}" th:value="${option.name()}" class="form-check-input">
                    <label th:for="${#ids.prev('option')}" th:text="${option.description}" class="form-check-label"></label>
                </div>
                <p th:errors="*{option}" class="text-danger">대회방식 오류</p>
            </div>

            <!-- single checkbox -->
            <!--<div>판매 여부</div>
            <div>
                <div class="form-check">
                    <input type="checkbox" id="open" th:field="*{open}" class="form-check-input">
                    <label for="open" class="form-check-label">판매 오픈</label>
                </div>
            </div>-->

            <!-- multi checkbox -->
            <!--<div>
                <div>등록 지역</div>
                <div th:each="region : ${regions}" class="form-check form-check-inline">
                    <input type="checkbox" th:field="*{regions}" th:value="${region.key}"
                           class="form-check-input">
                    <label th:for="${#ids.prev('regions')}"
                           th:text="${region.value}" class="form-check-label">서울</label>
                </div>
            </div>-->

            <div class="mb-3">
                <div class="fw-bold mb-1">대회 참가자 선택</div>
                <div th:each="member : ${members}" class="form-check form-check-inline">
                    <input type="checkbox" th:field="*{members}" th:value="${member.id}"
                           class="form-check-input">
                    <label class="flex-shrink-0 form-check-label" th:for="${#ids.prev('members')}">
                        <svg th:if="${#strings.isEmpty(member.image)}" th:data-jdenticon-value="${member.name}" width="40" height="40" class="rounded border bg-light me-3"></svg>
                        <img th:if="${!#strings.isEmpty(member.image)}" th:src="${member.image}" width="40" height="40" class="rounded border me-3"/>
                        <b th:text="${member.name}">이름</b>
                    </label>
                    <!--<label th:for="${#ids.prev('members')}"
                           th:text="${member.name}" class="form-check-label">이름</label>-->
                </div>
                <p th:errors="*{members}" class="text-danger">대회방식 오류</p>
            </div>
            <div class="row">
                <div class="col">
                    <button type="submit" class="btn btn-outline-dark">대회 만들기</button>
                    <button type="button" class="btn btn-outline-dark" th:onclick="|location.href='@{|/rooms/${roomId}|}'|">취소</button>
                </div>
            </div>
        </form>
        <div class="mb-4"></div>
    </div>
</div> <!-- /container -->
<div th:replace="fragments.html :: footer"></div>
</body>
<!--<script>
    let updateCount = (t) => {
        let count = document.getElementById("count");
        if (t == "LEAGUE") {
            for (let i = 64; i >= 25; i&#45;&#45;) {
                count.lastElementChild.remove();
            }
        } else if (t == "TOURNAMENT") {
            for (let i = 25; i <= 64; i++) {
                const option = document.createElement('option')
                option.value = i
                option.innerHTML = i
                count.appendChild(option);
            }
        }
    }
</script>
<script th:inline="javascript">
    let updateForm = () => {
        let count = document.getElementById("count").value;
        let emails = document.getElementById("emails");
        let n = emails.childElementCount;
        if (count > n) {
            for (let i = n + 1; i <= count; i++) {
                const email = document.createElement('tr')
                email.innerHTML = "<tr><td>" + i + "</td>" +
                    "<td><input type='text' name='emails[" + (i - 1) + "]' class='form-control'/></td>" +
                    "</tr>";
                emails.appendChild(email);
            }
        }
        else {
            for (let i = n; i > count; i&#45;&#45;) {
                emails.lastElementChild.remove();
            }
        }
    }
</script>-->
</html>