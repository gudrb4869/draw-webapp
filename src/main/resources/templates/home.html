<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header" />
<body class="d-flex flex-column min-vh-100">
<div th:replace="fragments/bodyheader" :: bodyheader />
<div class="container">
    <table class="table table-hover">
        <h3>방</h3>
        <!--<form class="form-inline d-flex justify-content-end" method="get", th:action="@{/}" th:value="${param.searchText}">
            <div class="form-group mx-sm-3 mb-2 pull-right">
                <label for="searchText" class="sr-only">검색</label>
                <input type="text" class="form-control" id="searchText" name="searchText">
                <button type="submit" class="btn btn-primary mb-2">검색 </button>
            </div>
        </form>-->
        <thead>
        <tr>
            <th class="col-6">방명</th>
            <th class="col-3">인원수</th>
            <th class="col-3">참여날짜</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${joins.isEmpty()}">
            <td class="text-center" colspan="12">방이 존재하지 않습니다.</td>
        </tr>
        <tr th:each="join : ${joins}" th:onclick="|location.href='@{|/rooms/${join.room.id}|}'|">
            <td class="col-6" th:text="${join.room.name}"></td>
            <td class="col-3" th:text="${join.room.count}"></td>
            <td class="col-3" th:text="${#temporals.format(join.createdDate, 'yyyy-MM-dd HH:mm:ss')}">참여날짜</td>
        </tr>
        </tbody>
    </table>
    <hr/>
    <button type="button" class="btn btn-light link-secondary pull-right" th:onclick="|location.href='@{/rooms/create}'|">방 만들기</button>

    <div class="center text-center">
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center"
                th:with="start=${T(java.lang.Math).floor(joins.number/5)*5 + 1},
                    last=(${start + 4 < joins.totalPages ? start + 4 : joins.totalPages})">
                <li>
                    <a th:href="@{/(page=1)}" aria-label="First">
                        <span aria-hidden="true"><<</span>
                    </a>
                </li>

                <li th:class="${joins.first} ? 'disabled'">
                    <a th:href="${joins.first} ? '#' :@{/(page=${joins.number})}" aria-label="Previous">
                        <span aria-hidden="true">&lt;</span>
                    </a>
                </li>

                <li th:each="page: ${#numbers.sequence(start, last, 1)}" th:class="${page == joins.number + 1} ? 'active'">
                    <a th:text="${page}" th:href="@{/(page=${page})}"></a>
                </li>

                <li th:class="${joins.last} ? 'disabled'">
                    <a th:href="${joins.last} ? '#' : @{/(page=${joins.number + 2})}" aria-label="Next">
                        <span aria-hidden="true">&gt;</span>
                    </a>
                </li>

                <li>
                    <a th:href="@{/(page=${joins.totalPages})}" aria-label="Last">
                        <span aria-hidden="true">>></span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div> <!-- /container -->
<div th:replace="fragments/footer" :: footer />
</body>
</html>